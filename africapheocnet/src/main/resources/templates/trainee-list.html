<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: head"></head>
<head>
    <!-- Add Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.7.0/dist/css/bootstrap.min.css">
    
    <!-- Add DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">

    <!-- Add jQuery and DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.6/js/dataTables.bootstrap5.min.js"></script>

</head>
<body data-topbar="dark">
    <header th:replace="header :: page-topbar"></header>
    <div th:replace="sidebar :: menu"></div>

    <div class="main-content">
        <div class="page-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-header justify-content-between d-flex align-items-center">
							    <h4 class="card-title">Trainee List</h4>
							    <div class="col-md-6 d-flex justify-content-end align-items-center">
							        <div class="d-flex flex-wrap align-items-start gap-2 mb-3">
							            <div>
							                <a href="#" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#addTraineeModal">
							                    <i class="uil uil-plus me-1"></i> Add New
							                </a>
							            </div>
							            <div class="row mb-3">
										    <div class="col-md-4">
										        <div class="input-group">
										            <span class="input-group-text"><i class="uil uil-globe"></i></span>
										            <select id="countryFilter" class="form-select" aria-label="Country Filter">
										                <option value="">All Countries</option>
										                <option th:each="country : ${T(net.pheocnetafr.africapheocnet.util.AutoFilledData).getAllAfricanCountries()}"
                        th:value="${country}" th:text="${country}"></option>
										            </select>
										        </div>
										    </div>
										    <div class="col-md-4">
										        <div class="input-group">
										            <span class="input-group-text"><i class="uil uil-book"></i></span>
										            <select id="moduleFilter" class="form-select" aria-label="Module Filter">
										                <option value="">All Modules</option>
										                  <option th:each="module : ${T(net.pheocnetafr.africapheocnet.util.AutoFilledData).getModuleList()}"
                        th:value="${module}" th:text="${module}"></option>
										            </select>
										        </div>
										    </div>
										    <div class="col-md-4">
										        <div class="input-group">
										            <span class="input-group-text"><i class="uil uil-user"></i></span>
										            <select id="roleFilter" class="form-select" aria-label="Role Filter">
										                <option value="">All Roles</option>
										                <option th:each="role : ${T(net.pheocnetafr.africapheocnet.util.AutoFilledData).getTraineeRoleList()}"
                        th:value="${role}" th:text="${role}"></option>
										            </select>
										        </div>
										    </div>
										</div>
							            
							            <div class="modal fade" id="addTraineeModal" tabindex="-1" aria-labelledby="addTraineeModalLabel" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addTraineeModalLabel">Add Trainee</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-4">
            	<form id="addTraineeForm">
				    <div id="alertBox" class="alert alert-warning alert-top-border alert-dismissible fade show" role="alert"
				        style="display: none;">
				        <i class="uil uil-exclamation-triangle font-size-16 text-warning me-2"></i>
				        <span class="alert-message">A simple border warning alert</span>
				        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				    </div>
				    <div class="mb-3">
				        <label for="trainee-firstname-input" class="form-label">First Name</label>
				        <input type="text" class="form-control" id="trainee-firstname-input" name="firstName" placeholder="Enter First Name">
				    </div>
				    <div class="mb-3">
				        <label for="trainee-lastname-input" class="form-label">Last Name</label>
				        <input type="text" class="form-control" id="trainee-lastname-input" name="lastName" placeholder="Enter Last Name">
				    </div>
				    <div class="mb-3">
				        <label for="trainee-email-input" class="form-label">Email</label>
				        <input type="email" class="form-control" id="trainee-email-input" name="email" placeholder="Enter Email">
				    </div>
				    <div class="mb-3">
				        <label for="trainee-phone-input" class="form-label">Phone Number</label>
				        <input type="text" class="form-control" id="trainee-phone-input" name="phoneNumber" placeholder="Enter Phone Number">
				    </div>
				    <div class="mb-3">
				        <label for="trainee-organization-input" class="form-label">Organization</label>
				        <input type="text" class="form-control" id="trainee-organization-input" name="organization" placeholder="Enter Organization">
				    </div>
				    <div class="mb-3">
				        <label for="trainee-position-input" class="form-label">Position</label>
				        <input type="text" class="form-control" id="trainee-position-input" name="position" placeholder="Enter Position">
				    </div>
				      <div class="mb-3">
				        <label for="trainee-module-input" class="form-label">Module Attended</label>
				        <select class="form-select" id="trainee-module-input" name="moduleAttended">
				            <option value="" selected disabled>Select Module</option>
				            <!-- Populate module options dynamically from AutoFilledData -->
				             <option th:each="module : ${T(net.pheocnetafr.africapheocnet.util.AutoFilledData).getModuleList()}"
                        th:value="${module}" th:text="${module}"></option>
				        </select>
				    </div>
				    <div class="mb-3">
				        <label for="trainee-trainingdate-input" class="form-label">Training Date</label>
				        <input type="date" class="form-control" id="trainee-trainingdate-input" name="trainingDate">
				        
				    </div>
				    <div class="mb-3">
				        <label for="trainee-country-input" class="form-label">Country</label>
				        <select class="form-select" id="trainee-country-input" name="country">
				            <option value="" selected disabled>Select Country</option>
                         <option th:each="country : ${T(net.pheocnetafr.africapheocnet.util.AutoFilledData).getAllAfricanCountries()}"
                        th:value="${country}" th:text="${country}"></option>
				        </select>
				    </div>
				    <div class="mb-3">
				        <label for="trainee-role-input" class="form-label">Role</label>
				        <select class="form-select" id="trainee-role-input" name="role">
				            <option value="" selected disabled>Select Role</option>
				            <!-- Populate role options dynamically from AutoFilledData -->
				              <option th:each="role : ${T(net.pheocnetafr.africapheocnet.util.AutoFilledData).getTraineeRoleList()}"
                        th:value="${role}" th:text="${role}"></option>
				        </select>
				    </div>
				</form>
            	
            </div><!-- end modalbody -->
            <div class="modal-footer">
                <button type="button" class="btn btn-light w-sm" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary w-sm" onclick="submitAddTraineeForm()">Add</button>
            </div><!-- end modalfooter -->
        </div><!-- end modal content -->
    </div>
</div>
							            
							        </div>
							    </div>
							</div>
                            <div class="card-body">
                                <table id="traineeTable" class="hover">
                                    <thead>
                                        <tr>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            <th>Email</th>
                                            <th>Phone Number</th>
                                            <th>Organization</th>
                                            <th>Position</th>
                                            <th>Module Attended</th>
                                            <th>Training Date</th>
                                            <th>Country</th>
                                            <th>Role</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="trainee : ${trainees}">
                                            <td th:text="${trainee.firstName}"></td>
                                            <td th:text="${trainee.lastName}"></td>
                                            <td th:text="${trainee.email}"></td>
                                            <td th:text="${trainee.phoneNumber}"></td>
                                            <td th:text="${trainee.organization}"></td>
                                            <td th:text="${trainee.position}"></td>
                                            <td th:text="${trainee.moduleAttended}"></td>
                                            <td th:text="${#dates.format(trainee.trainingDate, 'dd-MM-yyyy')}"></td>
                                            <td th:text="${trainee.country}"></td>
                                            <td th:text="${trainee.role}"></td>
                                            <td> 
                                 				<div class="dropdown">
							                   		 <a class="btn btn-link text-reset dropdown-toggle shadow-none" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							                        	<i class="uil uil-ellipsis-h"></i>
							                    	</a>
							                    <ul class="dropdown-menu dropdown-menu-end">
							                        <li>
													    <a class="dropdown-item" th:href="@{'trainees/edit/' + ${trainee.id}}">Edit</a>
													</li>
													<li>
													    <a class="dropdown-item delete-trainee" data-trainee-id="${trainee.id}" href="">Delete</a>
														</li>
								                        
							                    </ul>
								              </div>
	                                
                               				</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Trainee Modal -->
    <div class="modal fade" id="addTraineeModal" tabindex="-1" aria-labelledby="addTraineeModalLabel" style="display: none;" aria-hidden="true">
        <!-- Add your modal content here -->
    </div>

    <footer th:replace="footer :: footer-content"></footer>
    <footer th:replace="rightbar :: right-bar"></footer>
    
    <!-- JavaScript -->
    <script th:src="@{/libs/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/libs/metismenujs/metismenujs.min.js}"></script>
    <script th:src="@{/libs/simplebar/simplebar.min.js}"></script>
    <script th:src="@{/libs/feather-icons/feather.min.js}"></script>
    
    <!-- DataTables -->
    <script th:src="@{/libs/datatables/datatables.min.js}"></script>
    <script>
        $(document).ready(function() {
            $('#traineeTable').DataTable();
        });
        
        
        $(document).ready(function() {
            $('#traineeTable').DataTable();

            // Handle filtering when selecting options in dropdowns
            $('#countryFilter, #moduleFilter, #roleFilter').on('change', function() {
                var country = $('#countryFilter').val();
                var module = $('#moduleFilter').val();
                var role = $('#roleFilter').val();

                // Perform filtering based on selected options
                $('#traineeTable').DataTable().search('').draw();
                $('#traineeTable').DataTable().column(8).search(country).draw(); // Filter by country
                $('#traineeTable').DataTable().column(6).search(module).draw(); // Filter by module
                $('#traineeTable').DataTable().column(9).search(role).draw(); // Filter by role
            });
        });

    </script>
</body>
</html>
